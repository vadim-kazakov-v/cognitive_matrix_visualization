<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Eigenvalue Visualizer</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-tertiary: #16213e;
            --bg-card: #0d1b2a;
            --text-primary: #e6e6e6;
            --text-secondary: #a0a0a0;
            --accent-primary: #64ffda;
            --accent-secondary: #5e9bff;
            --border-color: #2a3a5a;
            --success: #4ade80;
            --warning: #fbbf24;
            --danger: #f87171;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--accent-secondary), var(--accent-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .form-section {
            background-color: var(--bg-secondary);
            margin-bottom: 25px;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .form-section h2 {
            margin-bottom: 20px;
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--accent-secondary);
            box-shadow: 0 0 0 3px rgba(94, 155, 255, 0.2);
        }
        
        button {
            background-color: var(--accent-secondary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            background-color: #4a8de0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(94, 155, 255, 0.3);
        }
        
        button.secondary {
            background-color: var(--bg-tertiary);
        }
        
        button.secondary:hover {
            background-color: #2a3a5a;
        }
        
        button.danger {
            background-color: var(--danger);
        }
        
        button.danger:hover {
            background-color: #ef4444;
        }
        
        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .matrix-cell {
            background-color: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .matrix-cell h4 {
            margin-bottom: 10px;
            color: var(--accent-primary);
        }
        
        .constraint {
            background-color: var(--bg-tertiary);
            margin: 15px 0;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-secondary);
            position: relative;
        }
        
        .constraint-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .constraint h3 {
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .constraint-controls {
            display: flex;
            gap: 10px;
        }
        
        .constraint-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .constraint-content {
                grid-template-columns: 1fr;
            }
        }
        
        .constraint-cell-selector {
            margin-bottom: 15px;
        }
        
        .constraint-cell-selector select {
            height: 150px;
            width: 100%;
        }
        
        .matrix-cell-grid {
            display: inline-block;
            margin-top: 15px;
            border: 1px solid var(--border-color);
            border-collapse: collapse;
        }
        
        .matrix-cell-grid tr, .matrix-cell-grid td {
            border: 1px solid var(--border-color);
        }
        
        .matrix-cell-grid-table {
            border-collapse: collapse;
            margin: 10px auto;
        }
        
        .matrix-cell-grid-table td {
            padding: 2px;
            border: 1px solid var(--border-color);
        }
        
        .matrix-cell-item {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }
        
        .matrix-cell-item.selected {
            background-color: var(--accent-secondary);
            color: white;
            border-color: var(--accent-secondary);
        }
        
        .matrix-cell-item:hover {
            background-color: #2a3a5a;
        }
        
        .matrix-cell-item.selected:hover {
            background-color: #5e9bff;
        }
        
        .matrix-input-table-container {
            overflow-x: auto;
            margin-top: 15px;
        }
        
        .matrix-input-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .matrix-input-table th {
            background-color: var(--bg-secondary);
            padding: 12px;
            text-align: center;
            border: 1px solid var(--border-color);
            color: var(--accent-primary);
            font-weight: 600;
        }
        
        .matrix-input-table td {
            padding: 10px;
            border: 1px solid var(--border-color);
            vertical-align: top;
        }
        
        .matrix-input-table .form-group {
            margin-bottom: 10px;
        }
        
        .matrix-input-table .form-group:last-child {
            margin-bottom: 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .modal-content {
            background-color: var(--bg-secondary);
            margin: 5% auto;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            width: 80%;
            max-width: 800px;
            color: var(--text-primary);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--accent-primary);
        }
        
        .close {
            color: var(--text-secondary);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: var(--danger);
        }
        
        .matrix-display {
            display: grid;
            gap: 2px;
            margin: 20px 0;
        }
        
        .matrix-display-row {
            display: flex;
            gap: 2px;
        }
        
        .matrix-display-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            font-size: 0.8rem;
        }
        
        .matrix-display-cell.constraint-cell {
            background-color: #5e9bff;
            border-color: #7abeff;
            color: white;
            font-weight: bold;
        }
        
        .config-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .eigenvector-visualization {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .eigenvector-controls {
            margin-bottom: 15px;
            padding: 10px;
            background-color: var(--bg-secondary);
            border-radius: 6px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        
        .eigenvector-controls label {
            font-weight: 500;
            color: var(--accent-primary);
        }
        
        .eigenvector-controls select {
            min-width: 150px;
        }
        
        .eigenvector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .eigenvector-cell {
            background-color: var(--bg-card);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .eigenvector-cell h4 {
            color: var(--accent-primary);
            margin-bottom: 8px;
        }
        
        .constraint-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        #plot {
            width: 100%;
            height: 700px;
            margin-top: 30px;
            background-color: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .stats-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background-color: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-primary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .constraint-tag {
            display: inline-block;
            background-color: var(--bg-tertiary);
            padding: 4px 8px;
            border-radius: 4px;
            margin: 2px;
            font-size: 0.8rem;
        }
        
        .instructions {
            background-color: var(--bg-tertiary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }
        
        .instructions h3 {
            color: var(--accent-primary);
            margin-bottom: 15px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-project-diagram"></i> Matrix Eigenvalue Visualizer</h1>
            <p class="subtitle">Advanced matrix analysis with constraint-based generation and visualization</p>
        </header>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> How to use this tool</h3>
            <ul>
                <li>Set your matrix size and click "Generate Matrix Form" to configure cell ranges</li>
                <li>Define constraints to limit the possible values of your matrices</li>
                <li>Specify generation parameters and click "Generate and Visualize"</li>
                <li>Use the interactive plot to explore eigenvalue relationships</li>
            </ul>
        </div>
        
        <div class="form-section">
            <h2><i class="fas fa-sliders-h"></i> Matrix Configuration</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="matrixSize"><i class="fas fa-border-all"></i> Matrix Size (N x N)</label>
                    <input type="number" id="matrixSize" min="1" max="10" value="2">
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button id="generateMatrixForm">
                        <i class="fas fa-cogs"></i> Generate Matrix Form
                    </button>
                </div>
            </div>
        </div>
        
        <div id="matrixFormContainer">
            <!-- Matrix form will be generated here -->
        </div>
        
        <div class="form-section">
            <h2><i class="fas fa-balance-scale"></i> Constraints</h2>
            <button id="addConstraint">
                <i class="fas fa-plus-circle"></i> Add Constraint
            </button>
            <div id="constraintsContainer">
                <!-- Constraints will be added here -->
            </div>
        </div>
        
        <div class="form-section">
            <h2><i class="fas fa-cogs"></i> Generation Parameters</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="numMatrices"><i class="fas fa-calculator"></i> Number of Matrices to Generate</label>
                    <input type="number" id="numMatrices" min="1" max="1000" value="100">
                    <div id="max-possible-info" style="margin-top: 5px; font-size: 0.9em; color: var(--text-secondary);">Max possible: Calculating...</div>
                </div>
                <div class="form-group">
                    <label for="dimensionality"><i class="fas fa-chart-line"></i> Dimensionality for Visualization</label>
                    <select id="dimensionality">
                        <option value="2">2D Visualization</option>
                        <option value="3">3D Visualization</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="eigenvectorSelection"><i class="fas fa-vector-square"></i> Eigenvector Visualization</label>
                    <select id="eigenvectorSelection">
                        <option value="none">No Eigenvectors</option>
                        <option value="all" selected>All Eigenvectors</option>
                        <option value="dominant">Dominant Eigenvector Only</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="algorithm"><i class="fas fa-project-diagram"></i> Dimensionality Reduction Algorithm</label>
                    <select id="algorithm">
                        <option value="tsne">t-SNE</option>
                        <option value="umap">UMAP</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="inputType"><i class="fas fa-inbox"></i> Input for Algorithm</label>
                    <select id="inputType">
                        <option value="eigenvalues">Eigenvalues</option>
                        <option value="eigenvectors">Eigenvectors</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="useImaginary">
                        <input type="checkbox" id="useImaginary" value="true"> 
                        <i class="fas fa-calculator"></i> Include Imaginary Components
                    </label>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <button id="generate" class="generate-btn">
                        <i class="fas fa-play-circle"></i> Generate and Visualize
                    </button>
                </div>
            </div>
        </div>
        
        <div id="plot"></div>
        
        <div class="form-section">
            <h2><i class="fas fa-download"></i> Export Results</h2>
            <div class="form-row">
                <div class="form-group">
                    <button id="saveResults">
                        <i class="fas fa-file-export"></i> Save Generated Matrices
                    </button>
                </div>
            </div>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">Matrices Generated</div>
                <div class="stat-value" id="matrices-count">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Constraints</div>
                <div class="stat-value" id="constraints-count">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Matrix Size</div>
                <div class="stat-value" id="size-value">2x2</div>
            </div>
        </div>
        
        <footer>
            <p>Matrix Eigenvalue Visualizer &copy; 2025 | Advanced Constraint-Based Matrix Analysis</p>
        </footer>
        
        <!-- Modal for displaying matrices -->
        <div id="matrixModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Matrix Details</h2>
                    <span class="close">&times;</span>
                </div>
                <div id="matrixContent">
                    <!-- Matrix content will be inserted here -->
                </div>
            </div>
        </div>
        
        <!-- Config controls -->
        <div class="form-section config-controls">
            <div class="form-group">
                <label for="configName"><i class="fas fa-file-import"></i> Configuration Name</label>
                <input type="text" id="configName" placeholder="Enter configuration name">
            </div>
            <div class="form-group">
                <button id="saveConfig">
                    <i class="fas fa-save"></i> Save Configuration
                </button>
                <button id="loadConfig">
                    <i class="fas fa-folder-open"></i> Load Configuration
                </button>
                <input type="file" id="configFile" style="display: none;" accept=".json">
            </div>
        </div>
    </div>

    <script>
        // Global variables to store generated results
        let globalCoords = [];
        let globalEigenvalues = [];
        let globalMatrices = [];
        let globalEigenvectors = [];
        
        $(document).ready(function() {
            // Calculate maximum possible matrices based on cell ranges
            function calculateMaxMatrices() {
                const size = parseInt($('#matrixSize').val()) || 0;
                
                // Check if matrix form is generated
                if ($('.matrix-input-table').length === 0) {
                    return 1000; // Default max if no form yet
                }
                
                // Collect matrix cell ranges
                const cellRanges = {};
                for (let i = 0; i < size; i++) {
                    for (let j = 0; j < size; j++) {
                        const min = parseFloat($(`.min-${i}-${j}`).val());
                        const max = parseFloat($(`.max-${i}-${j}`).val());
                        const step = parseFloat($(`.step-${i}-${j}`).val());
                        
                        if (!isNaN(min) && !isNaN(max) && !isNaN(step)) {
                            cellRanges[`${i},${j}`] = {
                                min: min,
                                max: max,
                                step: step
                            };
                        }
                    }
                }
                
                // Make an AJAX request to the backend to calculate max possible matrices
                $.ajax({
                    url: '/calculate_max_matrices',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        size: size,
                        cell_ranges: cellRanges
                    }),
                    success: function(response) {
                        const maxPossible = response.max_possible;
                        const currentNumMatrices = parseInt($('#numMatrices').val());
                        
                        // Update the max attribute of the input field
                        $('#numMatrices').attr('max', maxPossible);
                        
                        // Show the max possible value to the user
                        $('#max-possible-info').text(`Max possible: ${maxPossible.toLocaleString()}`);
                        
                        // If current value exceeds max, adjust it
                        if (currentNumMatrices > maxPossible) {
                            $('#numMatrices').val(maxPossible);
                        }
                        
                        // Update the stats display
                        updateStats();
                    },
                    error: function(xhr, status, error) {
                        console.error('Error calculating max matrices:', error);
                        // Set a reasonable default if calculation fails
                        $('#numMatrices').attr('max', 1000);
                        $('#max-possible-info').text('Max possible: Calculating...');
                    }
                });
            }
            
            // Update stats when form changes
            function updateStats() {
                const size = parseInt($('#matrixSize').val()) || 0;
                const constraints = $('.constraint').length;
                const matrices = parseInt($('#numMatrices').val()) || 0;
                
                $('#size-value').text(`${size}x${size}`);
                $('#constraints-count').text(constraints);
                $('#matrices-count').text(matrices);
            }
            
            // Listen for changes to update stats
            $('#matrixSize, #numMatrices').on('input', function() {
                updateStats();
                
                // If the number of matrices is changed, validate against max
                if ($(this).attr('id') === 'numMatrices') {
                    const maxAllowed = parseInt($('#numMatrices').attr('max')) || 1000;
                    const currentValue = parseInt($('#numMatrices').val());
                    
                    if (currentValue > maxAllowed) {
                        $('#numMatrices').val(maxAllowed);
                        updateStats();
                    }
                }
            });
            
            // Also listen for changes to matrix cell ranges to recalculate max
            $(document).on('input', '.matrix-input-table input', function() {
                // Debounce the calculation to avoid too many requests
                clearTimeout(window.matrixCalcTimeout);
                window.matrixCalcTimeout = setTimeout(function() {
                    calculateMaxMatrices();
                }, 500); // Wait 500ms after user stops typing
            });
            
            updateStats();
            
            // Generate matrix form based on size
            $('#generateMatrixForm').click(function() {
                const size = parseInt($('#matrixSize').val());
                if (size < 1 || size > 10) {
                    alert('Please enter a size between 1 and 10');
                    return;
                }
                
                let html = '<div class="form-section"><h2><i class="fas fa-table"></i> Matrix Cell Ranges</h2>';
                html += '<div class="matrix-input-table-container">';
                html += '<table class="matrix-input-table">';
                
                // Add header row with column indices
                html += '<thead><tr><th></th>';
                for (let j = 0; j < size; j++) {
                    html += `<th>Col ${j}</th>`;
                }
                html += '</tr></thead>';
                
                html += '<tbody>';
                for (let i = 0; i < size; i++) {
                    html += `<tr>`;
                    html += `<th>Row ${i}</th>`;
                    for (let j = 0; j < size; j++) {
                        html += `<td class="matrix-cell-input">
                            <div class="form-group">
                                <label>Min</label>
                                <input type="number" class="min-${i}-${j}" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label>Max</label>
                                <input type="number" class="max-${i}-${j}" step="0.01" value="1">
                            </div>
                            <div class="form-group">
                                <label>Step</label>
                                <input type="number" class="step-${i}-${j}" step="0.01" value="0.1" min="0.001">
                            </div>
                        </td>`;
                    }
                    html += '</tr>';
                }
                html += '</tbody></table></div></div>';
                $('#matrixFormContainer').html(html);
                
                // Update stats after generating matrix form
                updateStats();
                
                // Calculate maximum possible matrices based on the new form
                calculateMaxMatrices();
            });
            
            // Add constraint
            let constraintCount = 0;
            $('#addConstraint').click(function() {
                const size = parseInt($('#matrixSize').val());
                if (size < 1 || size > 10) {
                    alert('Please generate matrix form first');
                    return;
                }
                
                let cellOptions = '';
                for (let i = 0; i < size; i++) {
                    for (let j = 0; j < size; j++) {
                        cellOptions += `<option value="${i},${j}">[${i}][${j}]</option>`;
                    }
                }
                
                let matrixGridHtml = '<div class="matrix-cell-grid" data-constraint-id="${constraintCount}"><table class="matrix-cell-grid-table">';
                for (let i = 0; i < size; i++) {
                    matrixGridHtml += '<tr>';
                    for (let j = 0; j < size; j++) {
                        matrixGridHtml += `<td><div class="matrix-cell-item" data-cell="${i},${j}">[${i}][${j}]</div></td>`;
                    }
                    matrixGridHtml += '</tr>';
                }
                matrixGridHtml += '</table></div>';
                
                const constraintHtml = `
                    <div class="constraint" id="constraint-${constraintCount}">
                        <div class="constraint-header">
                            <h3><i class="fas fa-ruler-combined"></i> Constraint ${constraintCount + 1}</h3>
                            <div class="constraint-controls">
                                <button class="remove-constraint secondary" data-id="${constraintCount}">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                        <div class="constraint-content">
                            <div class="constraint-cell-selector">
                                <label>Click on cells to select/deselect:</label>
                                ${matrixGridHtml}
                                <div class="selected-cells-info">Selected: <span class="selected-count">0</span> cells</div>
                            </div>
                            <div class="constraint-options">
                                <div class="form-group">
                                    <label>Type of constraint:</label>
                                    <select class="constraint-type">
                                        <option value="sum_greater">Sum is greater than or equal to value</option>
                                        <option value="sum_less">Sum is less than or equal to value</option>
                                        <option value="sum_equal">Sum equals value</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Constraint value:</label>
                                    <input type="number" class="constraint-value" step="0.01" value="1">
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                $('#constraintsContainer').append(constraintHtml);
                constraintCount++;
                
                // Update stats after adding constraint
                updateStats();
                
                // Calculate maximum possible matrices based on the new form
                calculateMaxMatrices();
            });
            
            // Remove constraint
            $(document).on('click', '.remove-constraint', function() {
                const id = $(this).data('id');
                $('#constraint-' + id).remove();
                
                // Update stats after removing constraint
                updateStats();
                
                // Calculate maximum possible matrices based on the new form
                calculateMaxMatrices();
            });
            
            // Generate and visualize
            $('#generate').click(function() {
                const size = parseInt($('#matrixSize').val());
                const numMatrices = parseInt($('#numMatrices').val());
                const dimensionality = parseInt($('#dimensionality').val());
                
                // Collect matrix cell ranges
                const cellRanges = {};
                for (let i = 0; i < size; i++) {
                    for (let j = 0; j < size; j++) {
                        cellRanges[`${i},${j}`] = {
                            min: parseFloat($(`.min-${i}-${j}`).val()),
                            max: parseFloat($(`.max-${i}-${j}`).val()),
                            step: parseFloat($(`.step-${i}-${j}`).val())
                        };
                    }
                }
                
                // Collect constraints
                const constraints = [];
                $('.constraint').each(function() {
                    // Get selected cells from the visual grid instead of the select element
                    const constraintId = $(this).attr('id').replace('constraint-', '');
                    const selectedCells = [];
                    $(`.matrix-cell-grid[data-constraint-id="${constraintId}"] .matrix-cell-item.selected`).each(function() {
                        selectedCells.push($(this).data('cell'));
                    });
                    
                    constraints.push({
                        cells: selectedCells,
                        type: $(this).find('.constraint-type').val(),
                        value: parseFloat($(this).find('.constraint-value').val())
                    });
                });
                
                const data = {
                    size: size,
                    num_matrices: numMatrices,
                    dimensionality: dimensionality,
                    cell_ranges: cellRanges,
                    constraints: constraints,
                    eigenvector_selection: $('#eigenvectorSelection').val(),
                    algorithm: $('#algorithm').val(),
                    input_type: $('#inputType').val(),
                    use_imaginary: $('#useImaginary').is(':checked')
                };
                
                // Show loading state
                const generateBtn = $('#generate');
                const originalText = generateBtn.html();
                generateBtn.html('<i class="fas fa-spinner fa-spin"></i> Generating...');
                generateBtn.prop('disabled', true);
                
                $.ajax({
                    url: '/generate',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(data),
                    success: function(response) {
                        const coords = response.coordinates;
                        const eigenvalues = response.eigenvalues;
                        const matrices = response.matrices; // Get the original matrices
                        const eigenvectors = response.eigenvectors; // Get the eigenvectors
                        
                        // Store the results in global variables for saving
                        globalCoords = coords;
                        globalEigenvalues = eigenvalues;
                        globalMatrices = matrices;
                        globalEigenvectors = eigenvectors;
                        
                        // Prepare data for Plotly
                        if (dimensionality === 2) {
                            const trace = {
                                x: coords.map(c => c[0]),
                                y: coords.map(c => c[1]),
                                mode: 'markers',
                                type: 'scatter',
                                text: eigenvalues.map((e, i) => {
                                    // Format eigenvalues
                                    const formattedEigenvalues = e.map(val => {
                                        if (typeof val === 'object' && val !== null && 'real' in val && 'imag' in val) {
                                            // Complex number object
                                            if (val.imag === 0) {
                                                return val.real.toFixed(3);
                                            } else if (val.real === 0) {
                                                return val.imag.toFixed(3) + 'i';
                                            } else {
                                                return val.imag >= 0 ? `${val.real.toFixed(3)} + ${val.imag.toFixed(3)}i` : `${val.real.toFixed(3)} - ${Math.abs(val.imag).toFixed(3)}i`;
                                            }
                                        } else if (typeof val === 'number') {
                                            // Regular number
                                            return val.toFixed(3);
                                        } else {
                                            // Fallback for non-numeric values
                                            return String(val);
                                        }
                                    }).join(', ');
                                    
                                    // Format eigenvectors
                                    const formattedEigenvectors = eigenvectors[i].map((eigvec, idx) => {
                                        const components = eigvec.map(comp => {
                                            if (typeof comp === 'object' && comp !== null && 'real' in comp && 'imag' in comp) {
                                                // Complex number object
                                                if (comp.imag === 0) {
                                                    return comp.real.toFixed(3);
                                                } else if (comp.real === 0) {
                                                    return comp.imag.toFixed(3) + 'i';
                                                } else {
                                                    return comp.imag >= 0 ? `${comp.real.toFixed(3)} + ${comp.imag.toFixed(3)}i` : `${comp.real.toFixed(3)} - ${Math.abs(comp.imag).toFixed(3)}i`;
                                                }
                                            } else if (typeof comp === 'number') {
                                                // Regular number
                                                return comp.toFixed(3);
                                            } else {
                                                // Fallback for non-numeric values
                                                return String(comp);
                                            }
                                        }).join(', ');
                                        return `v${idx + 1}: [${components}]`;
                                    }).join('<br>');
                                    
                                    // Format original matrix
                                    const formattedMatrix = matrices[i].map(row => 
                                        row.map(cell => {
                                            if (typeof cell === 'object' && cell !== null && 'real' in cell && 'imag' in cell) {
                                                // Complex number object
                                                if (cell.imag === 0) {
                                                    return cell.real.toFixed(3);
                                                } else if (cell.real === 0) {
                                                    return cell.imag.toFixed(3) + 'i';
                                                } else {
                                                    return cell.imag >= 0 ? `${cell.real.toFixed(3)} + ${cell.imag.toFixed(3)}i` : `${cell.real.toFixed(3)} - ${Math.abs(cell.imag).toFixed(3)}i`;
                                                }
                                            } else if (typeof cell === 'number') {
                                                // Regular number
                                                return cell.toFixed(3);
                                            } else {
                                                // Fallback for non-numeric values
                                                return String(cell);
                                            }
                                        }).join(', ')
                                    ).join('<br>');
                                    
                                    return `<b>Matrix ${i}</b><br>` +
                                           `<b>Original Matrix:</b><br>${formattedMatrix}<br>` +
                                           `<b>EVs:</b> ${formattedEigenvalues}<br>` +
                                           `<b>Eigenvectors:</b><br>${formattedEigenvectors}`;
                                }),
                                marker: {
                                    size: 10,
                                    color: coords.map(c => c[0]),
                                    colorscale: 'Viridis',
                                    showscale: true,
                                    line: {
                                        color: 'white',
                                        width: 0.5
                                    }
                                }
                            };
                            
                            const layout = {
                                title: 'Matrix Eigenvalues Visualization (2D)',
                                paper_bgcolor: 'rgba(10, 20, 30, 0.8)',
                                plot_bgcolor: 'rgba(15, 25, 40, 0.8)',
                                font: {
                                    color: '#e6e6e6'
                                },
                                xaxis: {
                                    title: 'Component 1',
                                    gridcolor: '#2a3a5a',
                                    zerolinecolor: '#2a3a5a'
                                },
                                yaxis: {
                                    title: 'Component 2',
                                    gridcolor: '#2a3a5a',
                                    zerolinecolor: '#2a3a5a'
                                },
                                scene: {
                                    xaxis: {title: 'Component 1'},
                                    yaxis: {title: 'Component 2'}
                                }
                            };
                            
                            Plotly.newPlot('plot', [trace], layout);
                            
                            // Add click event to show matrix details
                            $('#plot').off('plotly_click').on('plotly_click', function(data) {
                                const pointIndex = data.points[0].pointNumber;
                                showMatrixDetails(pointIndex, eigenvalues[pointIndex], matrices[pointIndex], eigenvectors[pointIndex]);
                            });
                        } else {
                            const trace = {
                                x: coords.map(c => c[0]),
                                y: coords.map(c => c[1]),
                                z: coords.map(c => c[2]),
                                mode: 'markers',
                                type: 'scatter3d',
                                text: eigenvalues.map((e, i) => {
                                    // Format eigenvalues
                                    const formattedEigenvalues = e.map(val => {
                                        if (typeof val === 'object' && val !== null && 'real' in val && 'imag' in val) {
                                            // Complex number object
                                            if (val.imag === 0) {
                                                return val.real.toFixed(3);
                                            } else if (val.real === 0) {
                                                return val.imag.toFixed(3) + 'i';
                                            } else {
                                                return val.imag >= 0 ? `${val.real.toFixed(3)} + ${val.imag.toFixed(3)}i` : `${val.real.toFixed(3)} - ${Math.abs(val.imag).toFixed(3)}i`;
                                            }
                                        } else if (typeof val === 'number') {
                                            // Regular number
                                            return val.toFixed(3);
                                        } else {
                                            // Fallback for non-numeric values
                                            return String(val);
                                        }
                                    }).join(', ');
                                    
                                    // Format eigenvectors
                                    const formattedEigenvectors = eigenvectors[i].map((eigvec, idx) => {
                                        const components = eigvec.map(comp => {
                                            if (typeof comp === 'object' && comp !== null && 'real' in comp && 'imag' in comp) {
                                                // Complex number object
                                                if (comp.imag === 0) {
                                                    return comp.real.toFixed(3);
                                                } else if (comp.real === 0) {
                                                    return comp.imag.toFixed(3) + 'i';
                                                } else {
                                                    return comp.imag >= 0 ? `${comp.real.toFixed(3)} + ${comp.imag.toFixed(3)}i` : `${comp.real.toFixed(3)} - ${Math.abs(comp.imag).toFixed(3)}i`;
                                                }
                                            } else if (typeof comp === 'number') {
                                                // Regular number
                                                return comp.toFixed(3);
                                            } else {
                                                // Fallback for non-numeric values
                                                return String(comp);
                                            }
                                        }).join(', ');
                                        return `v${idx + 1}: [${components}]`;
                                    }).join('<br>');
                                    
                                    // Format original matrix
                                    const formattedMatrix = matrices[i].map(row => 
                                        row.map(cell => {
                                            if (typeof cell === 'object' && cell !== null && 'real' in cell && 'imag' in cell) {
                                                // Complex number object
                                                if (cell.imag === 0) {
                                                    return cell.real.toFixed(3);
                                                } else if (cell.real === 0) {
                                                    return cell.imag.toFixed(3) + 'i';
                                                } else {
                                                    return cell.imag >= 0 ? `${cell.real.toFixed(3)} + ${cell.imag.toFixed(3)}i` : `${cell.real.toFixed(3)} - ${Math.abs(cell.imag).toFixed(3)}i`;
                                                }
                                            } else if (typeof cell === 'number') {
                                                // Regular number
                                                return cell.toFixed(3);
                                            } else {
                                                // Fallback for non-numeric values
                                                return String(cell);
                                            }
                                        }).join(', ')
                                    ).join('<br>');
                                    
                                    return `<b>Matrix ${i}</b><br>` +
                                           `<b>Original Matrix:</b><br>${formattedMatrix}<br>` +
                                           `<b>EVs:</b> ${formattedEigenvalues}<br>` +
                                           `<b>Eigenvectors:</b><br>${formattedEigenvectors}`;
                                }),
                                marker: {
                                    size: 6,
                                    color: coords.map(c => c[0]),
                                    colorscale: 'Viridis',
                                    showscale: true
                                }
                            };
                            
                            const layout = {
                                title: 'Matrix Eigenvalues Visualization (3D)',
                                paper_bgcolor: 'rgba(10, 20, 30, 0.8)',
                                plot_bgcolor: 'rgba(15, 25, 40, 0.8)',
                                font: {
                                    color: '#e6e6e6'
                                },
                                scene: {
                                    xaxis: {title: 'Component 1', gridcolor: '#2a3a5a'},
                                    yaxis: {title: 'Component 2', gridcolor: '#2a3a5a'},
                                    zaxis: {title: 'Component 3', gridcolor: '#2a3a5a'}
                                }
                            };
                            
                            Plotly.newPlot('plot', [trace], layout);
                            
                            // Add click event to show matrix details
                            $('#plot').off('plotly_click').on('plotly_click', function(data) {
                                const pointIndex = data.points[0].pointNumber;
                                showMatrixDetails(pointIndex, eigenvalues[pointIndex], matrices[pointIndex], eigenvectors[pointIndex]);
                            });
                        }
                    },
                    error: function(xhr, status, error) {
                        alert('Error: ' + xhr.responseJSON.error);
                    },
                    complete: function() {
                        // Reset button state
                        generateBtn.html(originalText);
                        generateBtn.prop('disabled', false);
                    }
                });
            });
            
            // Matrix cell selection for constraints
            $(document).on('click', '.matrix-cell-item', function() {
                $(this).toggleClass('selected');
                
                // Update the selected count for this constraint
                const constraintId = $(this).closest('.matrix-cell-grid').data('constraint-id');
                const selectedCount = $(`.matrix-cell-grid[data-constraint-id="${constraintId}"] .matrix-cell-item.selected`).length;
                $(`.matrix-cell-grid[data-constraint-id="${constraintId}"]`).siblings('.selected-cells-info').find('.selected-count').text(selectedCount);
            });
            
            // Modal functionality
            $('.close').click(function() {
                $('#matrixModal').hide();
            });
            
            $(window).click(function(event) {
                if (event.target.id === 'matrixModal') {
                    $('#matrixModal').hide();
                }
            });
            
            // Function to show matrix details in modal
            function showMatrixDetails(matrixIndex, eigenvalues, matrix, eigenvectors) {
                // Create matrix display HTML
                let matrixDisplayHTML = '<div class="matrix-display">';
                matrixDisplayHTML += `<h3>Matrix ${matrixIndex + 1}</h3>`;
                
                // Format eigenvalues (handle complex numbers)
                const formattedEigenvalues = eigenvalues.map(val => {
                    if (typeof val === 'object' && val !== null && 'real' in val && 'imag' in val) {
                        // Complex number object
                        if (val.imag === 0) {
                            return val.real.toFixed(3);
                        } else if (val.real === 0) {
                            return val.imag.toFixed(3) + 'i';
                        } else {
                            return val.imag >= 0 ? `${val.real.toFixed(3)} + ${val.imag.toFixed(3)}i` : `${val.real.toFixed(3)} - ${Math.abs(val.imag).toFixed(3)}i`;
                        }
                    } else if (typeof val === 'number') {
                        // Regular number
                        return val.toFixed(3);
                    } else {
                        // Fallback for non-numeric values
                        return String(val);
                    }
                });
                
                matrixDisplayHTML += `<p><strong>Eigenvalues:</strong> ${formattedEigenvalues.join(', ')}</p>`;
                
                // Create grid for matrix
                matrixDisplayHTML += '<div class="matrix-display">';
                
                // Get constraint cells to highlight
                const constraintCells = new Set();
                $('.constraint').each(function() {
                    const constraintId = $(this).attr('id').replace('constraint-', '');
                    $(`.matrix-cell-grid[data-constraint-id="${constraintId}"] .matrix-cell-item.selected`).each(function() {
                        constraintCells.add($(this).data('cell'));
                    });
                });
                
                for (let i = 0; i < matrix.length; i++) {
                    matrixDisplayHTML += '<div class="matrix-display-row">';
                    for (let j = 0; j < matrix[i].length; j++) {
                        let cellValue = matrix[i][j];
                        let cellClass = "matrix-display-cell";
                        
                        // Check if this cell is part of any constraint
                        if (constraintCells.has(`${i},${j}`)) {
                            cellClass += " constraint-cell";
                        }
                        
                        if (typeof cellValue === 'object' && cellValue !== null && 'real' in cellValue && 'imag' in cellValue) {
                            // Complex number object
                            if (cellValue.imag === 0) {
                                cellValue = cellValue.real.toFixed(3);
                            } else if (cellValue.real === 0) {
                                cellValue = cellValue.imag.toFixed(3) + 'i';
                            } else {
                                cellValue = cellValue.imag >= 0 ? `${cellValue.real.toFixed(3)} + ${cellValue.imag.toFixed(3)}i` : `${cellValue.real.toFixed(3)} - ${Math.abs(cellValue.imag).toFixed(3)}i`;
                            }
                        } else if (typeof cellValue === 'number') {
                            cellValue = cellValue.toFixed(3);
                        } else {
                            cellValue = String(cellValue);
                        }
                        matrixDisplayHTML += `<div class="${cellClass}">${cellValue}</div>`;
                    }
                    matrixDisplayHTML += '</div>';
                }
                matrixDisplayHTML += '</div>';
                
                // Add eigenvector visualization
                if (eigenvectors && eigenvectors.length > 0) {
                    matrixDisplayHTML += '<div class="eigenvector-visualization">';
                    matrixDisplayHTML += '<h3>Eigenvectors</h3>';
                    matrixDisplayHTML += '<div class="eigenvector-grid">';
                    
                    for (let i = 0; i < eigenvectors[0].length; i++) {  // For each eigenvector
                        matrixDisplayHTML += '<div class="eigenvector-cell">';
                        matrixDisplayHTML += `<h4>Eigenvector ${i + 1}</h4>`;
                        
                        // Display eigenvector components
                        for (let j = 0; j < eigenvectors.length; j++) {
                            const component = eigenvectors[j][i];
                            let formattedComponent;
                            if (typeof component === 'object' && component !== null && 'real' in component && 'imag' in component) {
                                // Complex number object
                                if (component.imag === 0) {
                                    formattedComponent = component.real.toFixed(3);
                                } else if (component.real === 0) {
                                    formattedComponent = component.imag.toFixed(3) + 'i';
                                } else {
                                    formattedComponent = component.imag >= 0 ? `${component.real.toFixed(3)} + ${component.imag.toFixed(3)}i` : `${component.real.toFixed(3)} - ${Math.abs(component.imag).toFixed(3)}i`;
                                }
                            } else if (typeof component === 'number') {
                                // Regular number
                                formattedComponent = component.toFixed(3);
                            } else {
                                // Fallback for non-numeric values
                                formattedComponent = String(component);
                            }
                            matrixDisplayHTML += `<p>Component ${j}: ${formattedComponent}</p>`;
                        }
                        
                        matrixDisplayHTML += '</div>';
                    }
                    matrixDisplayHTML += '</div>';
                    matrixDisplayHTML += '</div>';
                }
                
                matrixDisplayHTML += '</div>';
                
                $('#matrixContent').html(matrixDisplayHTML);
                $('#matrixModal').show();
            }
            
            // Save configuration
            $('#saveConfig').click(function() {
                const configName = $('#configName').val().trim();
                if (!configName) {
                    alert('Please enter a configuration name');
                    return;
                }
                
                const configData = {
                    name: configName,
                    matrixSize: parseInt($('#matrixSize').val()),
                    numMatrices: parseInt($('#numMatrices').val()),
                    dimensionality: parseInt($('#dimensionality').val()),
                    algorithm: $('#algorithm').val(),
                    inputType: $('#inputType').val(),
                    useImaginary: $('#useImaginary').is(':checked'),
                    cellRanges: {},
                    constraints: [],
                    timestamp: new Date().toISOString()
                };
                
                // Collect cell ranges
                const size = configData.matrixSize;
                for (let i = 0; i < size; i++) {
                    for (let j = 0; j < size; j++) {
                        configData.cellRanges[`${i},${j}`] = {
                            min: parseFloat($(`.min-${i}-${j}`).val()),
                            max: parseFloat($(`.max-${i}-${j}`).val()),
                            step: parseFloat($(`.step-${i}-${j}`).val())
                        };
                    }
                }
                
                // Collect constraints
                $('.constraint').each(function() {
                    const constraintId = $(this).attr('id').replace('constraint-', '');
                    const selectedCells = [];
                    $(`.matrix-cell-grid[data-constraint-id="${constraintId}"] .matrix-cell-item.selected`).each(function() {
                        selectedCells.push($(this).data('cell'));
                    });
                    
                    configData.constraints.push({
                        cells: selectedCells,
                        type: $(this).find('.constraint-type').val(),
                        value: parseFloat($(this).find('.constraint-value').val())
                    });
                });
                
                // Save to localStorage
                localStorage.setItem(`matrixConfig_${configName}`, JSON.stringify(configData));
                
                // Create and download file
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(configData, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", configName + ".json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
                
                alert(`Configuration "${configName}" saved and downloaded successfully!`);
            });
            
            // Save results
            $('#saveResults').click(function() {
                if (globalMatrices.length === 0) {
                    alert('No results to save. Please generate matrices first.');
                    return;
                }
                
                const resultsData = {
                    timestamp: new Date().toISOString(),
                    coordinates: globalCoords,
                    eigenvalues: globalEigenvalues,
                    matrices: globalMatrices,
                    eigenvectors: globalEigenvectors,
                    matrixCount: globalMatrices.length,
                    matrixSize: globalMatrices[0] ? globalMatrices[0].length : 0
                };
                
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(resultsData, null, 2));
                const downloadAnchorNode = document.createElement('a');
                downloadAnchorNode.setAttribute("href", dataStr);
                downloadAnchorNode.setAttribute("download", "matrix_results_" + new Date().toISOString().slice(0, 19).replace(/:/g, '-') + ".json");
                document.body.appendChild(downloadAnchorNode);
                downloadAnchorNode.click();
                downloadAnchorNode.remove();
                
                alert(`Generated matrices and results saved successfully!`);
            });
            
            // Load configuration
            $('#loadConfig').click(function() {
                $('#configFile').click();
            });
            
            $('#configFile').change(function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const configData = JSON.parse(e.target.result);
                        loadConfiguration(configData);
                    } catch (error) {
                        alert('Error loading configuration: ' + error.message);
                    }
                };
                reader.readAsText(file);
            });
            
            // Function to load configuration
            function loadConfiguration(configData) {
                // Set form values
                $('#matrixSize').val(configData.matrixSize);
                $('#numMatrices').val(configData.numMatrices);
                $('#dimensionality').val(configData.dimensionality);
                
                // Set new parameters if they exist in config, otherwise use defaults
                if (configData.algorithm) {
                    $('#algorithm').val(configData.algorithm);
                } else {
                    $('#algorithm').val('tsne'); // default
                }
                
                if (configData.inputType) {
                    $('#inputType').val(configData.inputType);
                } else {
                    $('#inputType').val('eigenvalues'); // default
                }
                
                if (configData.useImaginary !== undefined) {
                    $('#useImaginary').prop('checked', configData.useImaginary);
                } else {
                    $('#useImaginary').prop('checked', false); // default
                }
                
                // Generate matrix form
                $('#generateMatrixForm').click();
                
                // Wait for form to be generated, then populate values
                setTimeout(function() {
                    // Populate cell ranges
                    for (const [cell, range] of Object.entries(configData.cellRanges)) {
                        const [i, j] = cell.split(',').map(Number);
                        $(`.min-${i}-${j}`).val(range.min);
                        $(`.max-${i}-${j}`).val(range.max);
                        $(`.step-${i}-${j}`).val(range.step);
                    }
                    
                    // Remove existing constraints and add new ones
                    $('#constraintsContainer').empty();
                    
                    configData.constraints.forEach(function(constraint, index) {
                        // Add constraint
                        $('#addConstraint').click();
                        
                        // Wait for constraint to be added, then populate values
                        setTimeout(function() {
                            const constraintId = index;
                            const $constraint = $(`#constraint-${constraintId}`);
                            
                            // Select cells in the grid
                            constraint.cells.forEach(function(cell) {
                                $constraint.find(`.matrix-cell-item[data-cell="${cell}"]`).addClass('selected');
                            });
                            
                            // Update selected count
                            const selectedCount = constraint.cells.length;
                            $constraint.find('.selected-cells-info .selected-count').text(selectedCount);
                            
                            // Set constraint type and value
                            $constraint.find('.constraint-type').val(constraint.type);
                            $constraint.find('.constraint-value').val(constraint.value);
                        }, 100);
                    });
                    
                    updateStats();
                
                // Calculate maximum possible matrices based on the new form
                calculateMaxMatrices();
                }, 100);
                
                alert(`Configuration "${configData.name}" loaded successfully!`);
            }
        });
    </script>
</body>
</html>